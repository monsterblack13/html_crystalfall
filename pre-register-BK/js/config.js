// ======================================
// Configuration ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Pre-Registration
// Generated by Config Builder
// ======================================

const CONFIG = {
    // ‡∏†‡∏≤‡∏©‡∏≤: 'th', 'en', 'id', 'ph', 'vn', 'zh'
    language: 'en',

    // Prefix ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö id ‡πÅ‡∏•‡∏∞ class (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ prefix ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà '')
    prefix: 'prereg-',

    // URL ‡∏Ç‡∏≠‡∏á API
    apiUrl: 'https://secure2.playpark.com/PreRegisterAPI/PreRegisterAPI.ashx',

    // Event ID ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
    eventId: '37',

    // IP Detection API (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
    ipDetectionAPI: {
        enabled: true,
        url: 'https://ip2location.playpark.com/IP2locationAll.ashx'
    },

    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
    fields: {
        // freeText1
        freeText1: {
            type: 'email',
            labelKey: 'email',
            placeholderKey: 'emailPlaceholder',
            required: true,
            htmlId: 'email',
            errorId: 'emailError',
            defaultValue: ''
        },

        // freeText2
        freeText2: {
            type: 'tel',
            labelKey: 'phone',
            placeholderKey: 'phonePlaceholder',
            required: false,
            htmlId: 'phone',
            errorId: 'phoneError',
            defaultValue: '',
            // ‚≠ê International Telephone Input Options
            useInternationalPhone: true,
            intlPhoneOptions: {
                initialCountry: '', // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å IP
                preferredCountries: ['th', 'sg', 'my', 'id', 'ph', 'vn']
            }
        },

        // freeText3 - ü§ñ Auto-generated for freeText2
        // Country Code from freeText2 (International Phone Input)
        freeText3: {
            type: 'hidden',
            value: '',  // ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÇ‡∏î‡∏¢ script.js ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
            _linkedTo: 'freeText2'
        },

        // freeText4
        freeText4: {
            type: 'checkbox',
            labelKey: 'acceptTerms',
            required: true,
            htmlId: 'policy',
            errorId: 'policyError',
            defaultValue: 'false',
            trueValue: 'true',
            falseValue: 'false'
        },

        // freeText5
        freeText5: {
            type: 'search-select', // ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏ô‡∏¥‡∏î‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö searchable select
            labelKey: 'country',
            required: true,
            htmlId: 'country',
            errorId: 'countryError',
            optionsKey: 'countryOptions',
            placeholderKey: 'countryPlaceholder',
            defaultValue: '',
            // Auto-fill ‡∏à‡∏≤‡∏Å IP Detection
            autoFillFrom: 'countryCode'
        }
    }
};

// Override CONFIG.language from URL param `lang` or localStorage
(function overrideConfigLanguageFromUrl() {
    try {
        const params = new URLSearchParams(window.location.search);
        let lang = (params.get('lang') || '').toLowerCase();

        // If not in URL, check localStorage
        if (!lang && typeof localStorage !== 'undefined') {
            lang = localStorage.getItem('lang');
        }

        if (lang === 'th' || lang === 'en' || lang === 'id') {
            CONFIG.language = lang;
        }
    } catch (e) {
        // ignore in non-browser environments
    }
})();
